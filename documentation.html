<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/documentation.css">
    <script type="text/javascript">
      var thePage = "documentation";
    </script>
    <script type="text/javascript" src="javascripts/menu.js"></script>

    <meta charset="utf-8">
    <title>Проект Vintage &#151; Документация</title>

<!--     <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> -->

    <!-- Google Analytics script -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-33475176-1']);
      _gaq.push(['_setDomainName', 'github.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

</head>
  <body>
    <script type="text/javascript">printMenu(window.thePage);</script>
        
        <div class="contents-frame">
    <div class="page">
      <div class="text">
        <h2>Содержание</h2>
        <ul>
          <li><span class="number">1.</span> <a href="#p1">Немного об особенностях архитектуры</a></li>
          <li><span class="number">2.</span> <a href="#p2">Стандартные устройства</a></li>
          <li><span class="number second">2.1.</span> <a href="#p2-1">Vintage Processor Unit (VPU)</a></li>
          <li><span class="number third">2.1.1.</span> <a href="#p2-1-1">Машинные команды</a></li>
        </ul>
      </div>
    </div>
    </div>
    <div class="page">
      <div class="text">
        
        <a name="p1"><h2><span class="number">1.</span> Немного об особенностях архитектуры</h2></a>
        <p>Vintage &#151; машинная архитектура, предполагающая несколько устройств, рабоающих совместно в общем линейном адресном пространстве
        и взаимодействующих посредством передачи друг другу так называемого <em>контекста исполнения</em>. Каждое устройство имеет собственный независимый
        жизненный цикл и любое взаимодействие между устройствами осуществляется асинхронно.</p>
        
        <p>Для данной архитектуры была создана виртуальная машина Vintage VM, которую можно свободно <a href="downloads.html">скачать</a> на этом сайте.</p>
        
        <p>В качестве примера представим себе взаимодействие двух устройств &#151; процессора (на картинке &#151; PU) и экрана (Screen)</p>
        
        <div class="pic">
          <img src="images/documentation-1.png" />
          <div>Пример машины, состоящей из процессора (Processor Unit) и экрана</div>
        </div>
        
        <p>Под термином &laquo;контекст исполнения&raquo; следует понимать некоторую сущность, описывающую состояние исполнителя в данный момент времени. 
        Говоря конкретнее, в данном случае речь идет о сущности, полностью описывающей состояние процессора.</p>
        
        <p>Для того, чтобы вывести на экран некий текст, процессор формирует в памяти, заданной контекстом исполнения, команду, а затем передает контекст
        внешнему устройству, т.е. экрану. Экран, в свою очередь, считывает из этой памяти команду, выполняет ее и таким выводится текст.</p>
        
        <p>Следует заметить, что все процедуры происходят асинхронно, то есть пока экран выполняет команду, переданную ему процессором, 
        последний продолжает выполнение кода. Необходимо избежать изменение области памяти, в которой находится команда для экрана до момента,
        когда эта команда будет выполнена. За это отвечает основная программа. Экран рапортует о том, что команда выполнена успешно,
        передав процессору специальное сообщение.</p>
        
        <p>Следует понимать, что в отличие от классической машинной архитектуры, содержащей понятие <em>центральный процессор</em>, в случае
        Vintage такого понятия в общем случае нет. Несмотря на то, что системы, содержащие только один процессор, неминуемо опираются на него как
        на основной, в случае Vintage принципиально то, что все устройства равноценны с точки зрения своего взаимодействия. Ни 
        &laquo;главных&raquo;, ни &laquo;второстепенных&raquo; нет.</p>
        
        <a name="p2"><h2><span class="number">2.</span> Стандартные устройства</h2></a>
        Здесь будет описание ряда стандартных устройств, поддержка которых предполагается в дальнейшем.
        <a name="p2-1"><h3><span class="number">2.1.</span> Vintage Processor Unit (VPU)</h3></a>
        Основным компонентом любой программируемой системы является процессор. В архитектуре Vintage процессор принимает и передает сообщения прочим 
        устройствам. Процессор исполняет машинные команды, записанные в память. Для того, чтобы запустить исполнение, процессор должен получить сообщение,
        содержащее контекст, который ему следует исполнять. Обсуждаемая реализация процессора VPU имеет 32х-разрядную архитектуру, то есть длина адреса
        памяти составляет 4 байта.
        <a name="p2-1-1"><h3><span class="number">2.1.1</span> Машинные команды</h3></a>
        <table cellpadding=0 cellspacing=0 class="commands">
          <thead>
            <td>Семейство команд</td><td>Описание</td>
          </thead>

          <tr>
          	<td style="padding-right: 10pt; white-space: nowrap; vertical-align: top;">
          	  <table cellpadding=0 cellspacing=0 class="cmd-inner">
          	    <tr><td>mov</td> <td><em>bytes</em>,</td> <td>{dest},</td> <td>src</td></tr>
          	    <tr><td>mov</td> <td><em>bytes</em>,</td> <td>[{dest}],</td> <td>{src}</td></tr>
          	    <tr><td>mov</td> <td><em>bytes</em>,</td> <td>{dest},</td> <td>[{src}]</td></tr>
          	  </table>
          	</td>
          	<td>Копирует bytes памяти из src в dest. Bytes является необязательным параметром. Если оно не указано, по умолчанию используется
          	длина адреса (4 байта).</td>
          </tr>

        </table>
      </div>
    </div>
  </body>
  
</html>